(()=>{"use strict";const t=t=>{const e=t;let o=[];(()=>{for(let t=0;t<e;t++)o.push("")})();const a=()=>o.every((t=>"hit"===t));return{length:e,hitSpots:o,hit:t=>{o[t]="hit",a()},isSunk:a}},e=()=>{const e=[];let o="horizontal";const a=[],r=[];let s=[],n=[];const l=(t,e)=>t.every((t=>e.includes(t)));return{place:(a,r,c)=>{if("horizontal"==o){const o=t(a),i=[],u=[];if((()=>{for(let t=0;t<o.length;t++)i.push(r+t);u.push(c)})(),l(i,s)&&l(u,n))return;i.forEach((t=>s.push(t))),u.forEach((t=>n.push(t))),e.push({locationsH:i,locationsV:u,newShip:o})}else if("vertical"==o){const o=t(a),i=[],u=[];if((()=>{i.push(r);for(let t=0;t<o.length;t++)u.push(c+t)})(),l(i,s)&&l(u,n))return;i.forEach((t=>s.push(t))),u.forEach((t=>n.push(t))),e.push({locationsH:i,locationsV:u,newShip:o})}},change:()=>{o="vertical"!=o?"vertical":"horizontal"},receiveAttack:(t,o)=>{let s,n;return s=e.find((e=>e.locationsH.includes(t)&&e.locationsV.includes(o))),null==s?(r.push([t,o]),a.push([t,o]),"miss"):1==s.locationsV.length?(n=s.locationsH.findIndex((e=>e==t)),s.newShip.hit(n),r.push([t,o]),"hit"):(n=s.locationsV.findIndex((t=>t==o)),s.newShip.hit(n),r.push([t,o]),"hit")},allSunk:()=>!!e.every((t=>t.newShip.isSunk())),shot:a,missed:r,ships:e,arrangement:o}},o=(t,e)=>{const a=Array.from(document.querySelectorAll(".player-board > .cell"));let r=t.turn(e);const s=a.find((t=>t.attributes[1].value==r[1]&&t.attributes[2].value==r[2]));return"miss"==r[0]?s.classList.add("miss"):"hit"==r[0]&&(s.classList.add("hit"),o(t,e)),r[0]};(()=>{(()=>{const t=document.querySelector(".player-board"),e=document.querySelector(".computer-board");for(let o=0;o<10;o++)for(let a=0;a<10;a++){const r=document.createElement("div"),s=document.createElement("div");r.classList.add("cell"),r.setAttribute("x",a),r.setAttribute("y",o),t.appendChild(r),s.classList.add("cell"),s.setAttribute("x",a),s.setAttribute("y",o),e.appendChild(s)}})();const t={turn:(t,e,o)=>t.gameboard.receiveAttack(e,o),gameboard:e()},a={turn:t=>{let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());const a=t=>t[0]==e&&t[1]==o;for(;t.gameboard.shot.some(a);)e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());return[t.gameboard.receiveAttack(e,o),e,o]},gameboard:e()};t.gameboard.place(4,6,7),a.gameboard.place(3,3,3),console.log(t.gameboard.allSunk()),function(t){const e=Array.from(document.querySelectorAll(".player-board > .cell"));t.gameboard.ships.forEach((t=>{const o=t.locationsH,a=t.locationsV,r=e.filter((t=>o.includes(parseInt(t.attributes[1].value))&&a.includes(parseInt(t.attributes[2].value))));r.forEach((t=>t.classList.add("occupied")))}))}(t),function(t){const e=Array.from(document.querySelectorAll(".computer-board > .cell"));t.gameboard.ships.forEach((t=>{const o=t.locationsH,a=t.locationsV,r=e.filter((t=>o.includes(parseInt(t.attributes[1].value))&&a.includes(parseInt(t.attributes[2].value))));r.forEach((t=>t.classList.add("occupied")))}))}(a),((t,e)=>{const a=document.querySelectorAll(".computer-board > .cell");function r(s){const n=parseInt(s.target.getAttribute("x")),l=parseInt(s.target.getAttribute("y")),c=t.turn(e,n,l);"hit"==c?s.target.classList.add("hit"):s.target.classList.add("miss"),"miss"==c?o(e,t):"hit"==c&&(e.gameboard.allSunk()||t.gameboard.allSunk())&&(console.log("done!"),a.forEach((t=>{t.removeEventListener("click",r)}))),s.target.removeEventListener("click",r)}a.forEach((t=>{t.addEventListener("click",r)}))})(t,a)})()})();