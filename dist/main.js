(()=>{"use strict";const e=e=>{const t=e;let o=[];(()=>{for(let e=0;e<t;e++)o.push("")})();const r=()=>o.every((e=>"hit"===e));return{length:t,hitSpots:o,hit:e=>{o[e]="hit",r()},isSunk:r}},t={turn:(e,t,o)=>e.gameboard.receiveAttack(t,o),gameboard:(()=>{const t=[];let o="horizontal";const r=[],c=[];let n=[];const s=(e,t)=>n.some((o=>e.includes(o[0])&&t.includes(o[1])));return{place:(r,c,l)=>{if("horizontal"==o){const o=e(r),i=[],a=[];return(()=>{for(let e=0;e<o.length;e++)i.push(c+e);a.push(l)})(),s(i,a)||c+r>10?"failed":(t.push({locationsH:i,locationsV:a,newShip:o}),n.push([c-1,l]),n.push([c+r,l]),i.forEach((e=>{n.push([e,a[0]])})),i.forEach((e=>{n.push([e,a[0]-1])})),i.forEach((e=>{n.push([e,a[0]+1])})),"placed")}if("vertical"==o){const o=e(r),i=[],a=[];if((()=>{i.push(c);for(let e=0;e<o.length;e++)a.push(l+e)})(),s(i,a))return"failed";if(l+r>10)return"failed";t.push({locationsH:i,locationsV:a,newShip:o}),n.push([c,l-1]),n.push([c,l+r]),a.forEach((e=>{n.push([i[0],e])})),a.forEach((e=>{n.push([i[0]-1,e])})),a.forEach((e=>{n.push([i[0]+1,e])}))}},change:function(){o="vertical"!=o?"vertical":"horizontal"},receiveAttack:(e,o)=>{let n,s;return n=t.find((t=>t.locationsH.includes(e)&&t.locationsV.includes(o))),null==n?(c.push([e,o]),r.push([e,o]),"miss"):1==n.locationsV.length?(s=n.locationsH.findIndex((t=>t==e)),n.newShip.hit(s),c.push([e,o]),"hit"):(s=n.locationsV.findIndex((e=>e==o)),n.newShip.hit(s),c.push([e,o]),"hit")},allSunk:()=>!!t.every((e=>e.newShip.isSunk())),checkCollision:s,shot:r,missed:c,ships:t,arrangement:o,occupied:n}})()};(()=>{const e=document.querySelector(".player-board"),t=document.querySelector(".computer-board");for(let o=0;o<10;o++)for(let r=0;r<10;r++){const c=document.createElement("div"),n=document.createElement("div");c.classList.add("cell"),c.setAttribute("x",r),c.setAttribute("y",o),e.appendChild(c),n.classList.add("cell"),n.setAttribute("x",r),n.setAttribute("y",o),t.appendChild(n)}})(),(e=>{let t=1,o=1;function r(c){const n=parseInt(c.target.getAttribute("x")),s=parseInt(c.target.getAttribute("y"));e.gameboard.place(o,n,s),function(e){const t=Array.from(document.querySelectorAll(".player-board > .cell"));e.gameboard.ships.forEach((e=>{const o=e.locationsH,r=e.locationsV,c=t.filter((e=>o.includes(parseInt(e.attributes[1].value))&&r.includes(parseInt(e.attributes[2].value))));c.forEach((e=>e.classList.add("occupied")))}))}(e),t++,5==t?o=2:8==t?o=3:10==t?o=4:11==t&&document.querySelectorAll(".player-board > .cell").forEach((e=>{e.removeEventListener("click",r)})),c.target.removeEventListener("click",r)}document.querySelectorAll(".player-board > .cell").forEach((e=>{e.addEventListener("click",r)}))})(t)})();