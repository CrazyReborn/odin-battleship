(()=>{"use strict";const t=t=>{const e=t;let o=[];(()=>{for(let t=0;t<e;t++)o.push("")})();const a=()=>o.every((t=>"hit"===t));return{length:e,hitSpots:o,hit:t=>{o[t]="hit",a()},isSunk:a}},e=()=>{const e=[];let o="horizontal";const a=[],r=[];let s=[],l=[];const n=(t,e)=>t.every((t=>e.includes(t)));return{place:(a,r,c)=>{if("horizontal"==o){const o=t(a),i=[],u=[];if((()=>{for(let t=0;t<o.length;t++)i.push(r+t);u.push(c)})(),n(i,s)&&n(u,l))return;i.forEach((t=>s.push(t))),u.forEach((t=>l.push(t))),e.push({locationsH:i,locationsV:u,newShip:o})}else if("vertical"==o){const o=t(a),i=[],u=[];if((()=>{i.push(r);for(let t=0;t<o.length;t++)u.push(c+t)})(),n(i,s)&&n(u,l))return;i.forEach((t=>s.push(t))),u.forEach((t=>l.push(t))),e.push({locationsH:i,locationsV:u,newShip:o})}},change:()=>{o="vertical"!=o?"vertical":"horizontal"},receiveAttack:(t,o)=>{let s,l;return s=e.find((e=>e.locationsH.includes(t)&&e.locationsV.includes(o))),null==s?(r.push([t,o]),a.push([t,o]),"miss"):1==s.locationsV.length?(l=s.locationsH.findIndex((e=>e==t)),s.newShip.hit(l),r.push([t,o]),"hit"):(l=s.locationsV.findIndex((t=>t==o)),s.newShip.hit(l),r.push([t,o]),"hit")},allSunk:()=>!!e.every((t=>t.newShip.isSunk())),shot:a,missed:r,ships:e,arrangement:o}};(()=>{(()=>{const t=document.querySelector(".player-board"),e=document.querySelector(".computer-board");for(let o=0;o<10;o++)for(let a=0;a<10;a++){const r=document.createElement("div"),s=document.createElement("div");r.classList.add("cell"),r.setAttribute("x",a),r.setAttribute("y",o),t.appendChild(r),s.classList.add("cell"),s.setAttribute("x",a),s.setAttribute("y",o),e.appendChild(s)}})();const t={turn:(t,e,o)=>t.gameboard.receiveAttack(e,o),gameboard:e()},o={turn:t=>{let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());const a=t=>t[0]==e&&t[1]==o;for(;t.gameboard.shot.some(a);)e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());return[t.gameboard.receiveAttack(e,o),e,o]},gameboard:e()};t.gameboard.place(4,6,7),o.gameboard.place(3,3,3),console.log(t.gameboard.allSunk()),function(t){const e=Array.from(document.querySelectorAll(".player-board > .cell"));t.gameboard.ships.forEach((t=>{const o=t.locationsH,a=t.locationsV,r=e.filter((t=>o.includes(parseInt(t.attributes[1].value))&&a.includes(parseInt(t.attributes[2].value))));r.forEach((t=>t.classList.add("occupied")))}))}(t),function(t){const e=Array.from(document.querySelectorAll(".computer-board > .cell"));t.gameboard.ships.forEach((t=>{const o=t.locationsH,a=t.locationsV,r=e.filter((t=>o.includes(parseInt(t.attributes[1].value))&&a.includes(parseInt(t.attributes[2].value))));r.forEach((t=>t.classList.add("occupied")))}))}(o),((t,e)=>{function o(a){const r=parseInt(a.target.getAttribute("x")),s=parseInt(a.target.getAttribute("y")),l=t.turn(e,r,s);"hit"==l?a.target.classList.add("hit"):a.target.classList.add("miss"),"miss"==l?((t,e)=>{const o=Array.from(document.querySelectorAll(".player-board > .cell")),a=t.turn(e),r=o.find((t=>t.attributes[1].value==a[1]&&t.attributes[2].value==a[2]));"miss"==a[0]?r.classList.add("miss"):"hit"==a[0]&&r.classList.add("hit"),a[0]})(e,t):"hit"==l&&e.gameboard.allSunk()&&console.log("done!"),a.target.removeEventListener("click",o)}document.querySelectorAll(".computer-board > .cell").forEach((t=>{t.addEventListener("click",o)}))})(t,o)})()})();