(()=>{"use strict";const t=t=>{const e=t;let o=[];(()=>{for(let t=0;t<e;t++)o.push("")})();const a=()=>o.every((t=>"hit"===t));return{length:e,hitSpots:o,hit:t=>{o[t]="hit",a()},isSunk:a}},e=()=>{const e=[];let o="horizontal";const a=[],r=[];let s=[],c=[];const n=(t,e)=>t.every((t=>e.includes(t)));return{place:(a,r,l)=>{if("horizontal"==o){const o=t(a),i=[],u=[];if((()=>{for(let t=0;t<o.length;t++)i.push(r+t);u.push(l)})(),n(i,s)&&n(u,c))return;i.forEach((t=>s.push(t))),u.forEach((t=>c.push(t))),e.push({locationsH:i,locationsV:u,newShip:o})}else if("vertical"==o){const o=t(a),i=[],u=[];if((()=>{i.push(r);for(let t=0;t<o.length;t++)u.push(l+t)})(),n(i,s)&&n(u,c))return;i.forEach((t=>s.push(t))),u.forEach((t=>c.push(t))),e.push({locationsH:i,locationsV:u,newShip:o})}},change:()=>{o="vertical"!=o?"vertical":"horizontal"},receiveAttack:(t,o)=>{let s,c;return s=e.find((e=>e.locationsH.includes(t)&&e.locationsV.includes(o))),null==s?(r.push([t,o]),a.push([t,o]),"miss"):1==s.locationsV.length?(c=s.locationsH.findIndex((e=>e==t)),s.newShip.hit(c),r.push([t,o]),"hit"):(c=s.locationsV.findIndex((t=>t==o)),s.newShip.hit(c),r.push([t,o]),"hit")},allSunk:()=>!!e.every((t=>t.newShip.isSunk())),shot:a,missed:r,ships:e,arrangement:o}};(()=>{(()=>{const t=document.querySelector(".player-board"),e=document.querySelector(".computer-board");for(let o=0;o<10;o++)for(let a=0;a<10;a++){const r=document.createElement("div"),s=document.createElement("div");r.classList.add("cell"),r.setAttribute("x",a),r.setAttribute("y",o),t.appendChild(r),s.classList.add("cell"),s.setAttribute("x",a),s.setAttribute("y",o),e.appendChild(s)}})();const t={turn:(t,e,o)=>t.gameboard.receiveAttack(e,o),gameboard:e()},o={turn:t=>{let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());const a=t=>t[0]==e&&t[1]==o;for(;t.gameboard.shot.some(a);)e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());t.gameboard.receiveAttack(e,o)},gameboard:e()};var a,r;t.gameboard.place(2,3,3),o.gameboard.place(2,3,3),function(t){const e=Array.from(document.querySelectorAll(".player-board > .cell"));t.gameboard.ships.forEach((t=>{const o=t.locationsH,a=t.locationsV,r=e.filter((t=>o.includes(parseInt(t.attributes[1].value))&&a.includes(parseInt(t.attributes[2].value))));r.forEach((t=>t.classList.add("occupied")))}))}(t),function(t){const e=Array.from(document.querySelectorAll(".computer-board > .cell"));t.gameboard.ships.forEach((t=>{const o=t.locationsH,a=t.locationsV,r=e.filter((t=>o.includes(parseInt(t.attributes[1].value))&&a.includes(parseInt(t.attributes[2].value))));r.forEach((t=>t.classList.add("occupied")))}))}(o),a=t,r=o,document.querySelectorAll(".computer-board > .cell").forEach((t=>{t.addEventListener("click",(t=>{const e=parseInt(t.target.getAttribute("x")),o=parseInt(t.target.getAttribute("y"));"hit"==a.turn(r,e,o)?t.target.classList.add("hit"):t.target.classList.add("miss")}))}))})()})();